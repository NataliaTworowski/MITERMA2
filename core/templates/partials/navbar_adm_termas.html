{% load static %}

<!-- Sidebar -->
<aside id="sidebar" class="sidebar fixed md:static inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white shadow-lg">
    <!-- Header del Sidebar -->
    <div class="flex items-center justify-between p-6 border-b border-slate-700">
        <div class="flex items-center space-x-3">
            <img src="{% static 'img/logo.png' %}" alt="MiTerma Logo" class="w-10 h-10">
            <span class="text-xl font-bold">MiTerma Admin</span>
        </div>
        <!-- Botón cerrar en móvil -->
        <button id="closeSidebar" class="md:hidden text-white hover:text-slate-300">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>

    <!-- Información del usuario -->
    <div class="p-6 border-b border-slate-700">
        <div class="flex items-center space-x-3">
            <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
                </svg>
            </div>
            <div>
                <p class="font-semibold">{{ usuario.nombre }}</p>
                <p class="text-sm text-slate-300">{{ usuario.rol.nombre }}</p>
            </div>
        </div>
    </div>

    <!-- Navegación -->
    <nav class="flex-1 p-4">
        <ul class="space-y-2">
            <li>
                <a href="{% url 'usuarios:adm_termas' %}" class="flex items-center space-x-3 px-4 py-3 rounded-lg {% if request.resolver_match.url_name == 'adm_termas' %}bg-slate-800 text-white font-medium{% else %}hover:bg-slate-800 transition-colors duration-200{% endif %}">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                    </svg>
                    <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg {% if 'gestionar-terma' in request.resolver_match.url_name %}bg-slate-800 text-white font-medium{% else %}hover:bg-slate-800 transition-colors duration-200{% endif %}">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M5.5 16a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 16h-8z"></path>
                    </svg>
                    <span>Gestionar Mi Terma</span>
                </a>
            </li>
            <li>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg {% if 'reservas' in request.resolver_match.url_name %}bg-slate-800 text-white font-medium{% else %}hover:bg-slate-800 transition-colors duration-200{% endif %}">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                    </svg>
                    <span>Reservas</span>
                </a>
            </li>
            <li>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg {% if 'entradas' in request.resolver_match.url_name %}bg-slate-800 text-white font-medium{% else %}hover:bg-slate-800 transition-colors duration-200{% endif %}">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"></path>
                    </svg>
                    <span>Entradas/Boletos</span>
                </a>
            </li>
            <li>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg {% if 'reportes' in request.resolver_match.url_name %}bg-slate-800 text-white font-medium{% else %}hover:bg-slate-800 transition-colors duration-200{% endif %}">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 10a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"></path>
                    </svg>
                    <span>Trabajadores</span>
                </a>
            </li>
            <li>
                <a href="{% url 'termas:subir_fotos' %}" class="flex items-center space-x-3 px-4 py-3 rounded-lg {% if 'fotos' in request.resolver_match.url_name %}bg-slate-800 text-white font-medium{% else %}hover:bg-slate-800 transition-colors duration-200{% endif %}">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2h-3L12 1H8L7 3H4zm6 4a3 3 0 100 6 3 3 0 000-6z" clip-rule="evenodd"></path>
                    </svg>
                    <span>Fotos</span>
                </a>
            </li>
            
        </ul>
    </nav>

    <!-- Logout -->
    <div class="p-4 border-t border-slate-700">
        <a href="{% url 'usuarios:logout' %}" onclick="return confirm('¿Estás seguro que deseas cerrar sesión?')" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 transition-colors duration-200 w-full border border-slate-600 hover:border-slate-500">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"></path>
            </svg>
            <span>Cerrar Sesión</span>
        </a>
    </div>
</aside>

<!-- Overlay para móviles -->
<div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden hidden"></div>

<!-- Botón para abrir sidebar en móviles -->
<button id="openSidebar" class="md:hidden fixed top-4 left-4 z-30 bg-slate-900 text-white p-2 rounded-lg shadow-lg">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
</button>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebarOverlay');
    const openBtn = document.getElementById('openSidebar');
    const closeBtn = document.getElementById('closeSidebar');

    // Abrir sidebar
    openBtn.addEventListener('click', function() {
        sidebar.classList.add('sidebar-open');
        overlay.classList.remove('hidden');
    });

    // Cerrar sidebar
    function closeSidebar() {
        sidebar.classList.remove('sidebar-open');
        overlay.classList.add('hidden');
    }

    closeBtn.addEventListener('click', closeSidebar);
    overlay.addEventListener('click', closeSidebar);

    // Cerrar con tecla Escape
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeSidebar();
        }
    });
});
</script>

<style>
.sidebar {
    transition: transform 0.3s ease-in-out;
}
.sidebar-hidden {
    transform: translateX(-100%);
}
@media (max-width: 768px) {
    .sidebar {
        transform: translateX(-100%);
    }
    .sidebar.sidebar-open {
        transform: translateX(0);
    }
}
</style>